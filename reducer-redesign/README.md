## Shift reducer redesign

"Design" is pushing it, I know.

Find it [here](https://bakkot.github.io/misc/reducer-redesign/).

Parts:
- [Shift-reducer](https://github.com/shapesecurity/shift-reducer-js)
- [CodeMirror](https://codemirror.net/)
- [Realms shim](https://github.com/tc39/proposal-realms/tree/master/shim)
- [lz-string](https://github.com/pieroxy/lz-string)


Examples:
- [collect IdentifierExpressions](https://bakkot.github.io/misc/reducer-redesign/#N4IgNgtiBcoG4EMwFcCmMSoB4AcD2ATgC4AEAJqgGYLJikB2qA7iQMZgIDOnJAkhfSIBLSkNQEAwnjBhUrIoRLYiqemR5T6rBEQBKqMslbiSwADr0SJAgaOp+q4aPEBRXDe5C89ABT08FAA0JJxEOqgAlKYWVlY2RMgElgDa-hQAdPQIEKgAugDcMSQAvhal9CDFgSAQULAgiCjo0CAIJADUJAAMhfSUfrRgEfmVxUA)
- [find the depth](https://bakkot.github.io/misc/reducer-redesign/#N4IgNgtiBcoG4EMwFcCmMQHpMAIByA9gC6rQ5EAWqOEBAdgQJYAmOA7o2GDgEbV9ESAJxwIAZsJwBnCowkBaIambIAxqiHyAVlIDEAZgDsAHTqr6UojQQAPALL0mrALw5gpnDlQQADkQCeABQAlG4enjhKRMhCdDgADADc4QC+ADTh5mYIRIHEVEKh7nERUTFxdjkUAHQQtoGUjFJpOPkawckl6aYpnaZZljjMqH4UAErKaho4rgjMCH6B4S4AfEM4ANQ4AIwZJXSobDgODCxIEyrqQoF19o4swaYdpqaoNj4EQlbDYgjIYN8RpQLlMhJ0QOkQBAoLAQIgUOhoCAEJsEp0xIE6P8wB0ISkgA)
- [count nodes](https://bakkot.github.io/misc/reducer-redesign/#N4IgNgtiBcoG4EMwFcCmMQGMD2A7AzgC4AEOyuhASqgCbKaoBOxAvMQjQgA6EAUAOrmLEarAHwjiAamIBGADSDhuVAHdiABRT5qdBo14BKQYYDcgwagAeXbIxI1UAMwTIwJMhV30m53CABfeRAIKFgQRBR0aBAEaWIABj8nXlw3MDNAgKA)
- [flatten](https://bakkot.github.io/misc/reducer-redesign/#N4IgNgtiBcoG4EMwFcCmMQGMD2A7AzgC4AEAZmAoQEqoAmymqATsQLzEK0IAOhAFAB1cxYn1oAaYrgCUbAHzEA2rgB0hAJ7dUAXRU5cmSmOnihI3KgDuxAMJ5D1Og2Z9pQ6QG4hQ1AA9u2EwktKikCMhgJOSUNPSMTF64IAC+4iAQULAgiCjo0CAIxADUxAAMiaR8uBFgninJQA)
- [find parents](https://bakkot.github.io/misc/reducer-redesign/#N4IgNgtiBcoG4EMwFcCmMQHpMAIByA8gCoCi0OALgBYCWAzjgPYB2YAnjgE6oAOjnFBhTY9UdADQ4AZvxyoEdVEyk4enGswoaA5gDoAOs2w4AUsjoUcAAzqZdw0dm1XKjHNtSX+NbRqQ5mRgATMQMjXAB1GmpKKgRLAGM45g9JRmQKHgycehw6ZGiEACMwJRlOVQU6HVdrZlQAdxwAWQQeAAoASisww0MElgtK7k06ZpZGGiCcAF4cYEMcOQgeYS75xaWuT2ROZg39raWkmjAgkfIAbQBdcU2jngQaTjor2-ucAF8Abk3Pu8OA2YCXi7UY1FQnE6ByO3Aou32C0ORxOZwusXoulR51QzCxLBBFDBEM4WNoaNxnQBRyWj2erwxdF0dJe+OBoPBVEhzKeLypHx+fwBguY-UGlkeI0EACVUEFkAlIbMcAggm0iZt2kFJMxoTMAHw4dpIlHknHMK54hyod7Iyr08hBMmnc26CBtdoJWaGy4JHX2EQ2zpswlann0-mHT6Rpb1JrjQJTJCy+WKzjtSW4wQJyZBTqGTq-UXA8VMdS+ZjJuUK1DjeWlZWZ0Ypmuk7ip2vBZClIt9ZhNmXVtO6ds1uvdpRzKTIYFaFjtXSLhCcbR0aEm7bwvZlnx+MAtxXj0q6No8djtaj0STL1fBll0IsivuoAAefAEOBCUgQ3Yly6zdAHpCRYgP8IAQFAsAgIgKDoNAIAIDgADUOAAAxFlI7TMN2YCFqBnxAA)


TODO:
- this should have the (checked) AST constructors in scope
- this should have the spec in scope
